import{g as he,o as ye,B as H,r as $,S as be,E as ge,w as K,z as me,A as we,U as xe}from"./_plugin-vue_export-helper-Dxsx2kFr.js";function Ae(e){return me()?(we(e),!0):!1}function z(e){return typeof e=="function"?e():he(e)}const Se=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ve=Object.prototype.toString,_e=e=>ve.call(e)==="[object Object]",O=()=>Date.now(),Ce=()=>{};function Ee(e,t){function r(...n){return new Promise((a,i)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(a).catch(i)})}return r}const q=e=>e();function Fe(e=q){const t=$(!0);function r(){t.value=!1}function n(){t.value=!0}const a=(...i)=>{t.value&&e(...i)};return{isActive:be(t),pause:r,resume:n,eventFilter:a}}function Be(e){return e||ge()}function Ue(e,t,r={}){const{eventFilter:n=q,...a}=r;return K(e,Ee(n,t),a)}function De(e,t,r={}){const{eventFilter:n,...a}=r,{eventFilter:i,pause:f,resume:c,isActive:A}=Fe(n);return{stop:Ue(e,t,{...a,eventFilter:i}),pause:f,resume:c,isActive:A}}function Oe(e,t=!0,r){Be()?ye(e,r):t?e():H(e)}function Re(e){var t;const r=z(e);return(t=r==null?void 0:r.$el)!=null?t:r}const D=Se?window:void 0;function V(...e){let t,r,n,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([r,n,a]=e,t=D):[t,r,n,a]=e,!t)return Ce;Array.isArray(r)||(r=[r]),Array.isArray(n)||(n=[n]);const i=[],f=()=>{i.forEach(d=>d()),i.length=0},c=(d,l,m,p)=>(d.addEventListener(l,m,p),()=>d.removeEventListener(l,m,p)),A=K(()=>[Re(t),z(a)],([d,l])=>{if(f(),!d)return;const m=_e(l)?{...l}:l;i.push(...r.flatMap(p=>n.map(_=>c(d,p,_,m))))},{immediate:!0,flush:"post"}),y=()=>{A(),f()};return Ae(y),y}const E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},F="__vueuse_ssr_handlers__",Te=ze();function ze(){return F in E||(E[F]=E[F]||{}),E[F]}function Ne(e,t){return Te[e]||t}function Pe(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const je={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},W="vueuse-storage";function Ie(e,t,r,n={}){var a;const{flush:i="pre",deep:f=!0,listenToStorageChanges:c=!0,writeDefaults:A=!0,mergeDefaults:y=!1,shallow:d,window:l=D,eventFilter:m,onError:p=o=>{console.error(o)},initOnMounted:_}=n,b=(d?xe:$)(typeof t=="function"?t():t);if(!r)try{r=Ne("getDefaultStorage",()=>{var o;return(o=D)==null?void 0:o.localStorage})()}catch(o){p(o)}if(!r)return b;const g=z(t),j=Pe(g),S=(a=n.serializer)!=null?a:je[j],{pause:fe,resume:I}=De(b,()=>ce(b.value),{flush:i,deep:f,eventFilter:m});l&&c&&Oe(()=>{V(l,"storage",C),V(l,W,pe),_&&C()}),_||C();function L(o,u){l&&l.dispatchEvent(new CustomEvent(W,{detail:{key:e,oldValue:o,newValue:u,storageArea:r}}))}function ce(o){try{const u=r.getItem(e);if(o==null)L(u,null),r.removeItem(e);else{const h=S.write(o);u!==h&&(r.setItem(e,h),L(u,h))}}catch(u){p(u)}}function de(o){const u=o?o.newValue:r.getItem(e);if(u==null)return A&&g!=null&&r.setItem(e,S.write(g)),g;if(!o&&y){const h=S.read(u);return typeof y=="function"?y(h,g):j==="object"&&!Array.isArray(h)?{...g,...h}:h}else return typeof u!="string"?u:S.read(u)}function C(o){if(!(o&&o.storageArea!==r)){if(o&&o.key==null){b.value=g;return}if(!(o&&o.key!==e)){fe();try{(o==null?void 0:o.newValue)!==S.write(b.value)&&(b.value=de(o))}catch(u){p(u)}finally{o?H(I):I()}}}}function pe(o){C(o.detail)}return b}function Xe(e,t,r={}){const{window:n=D}=r;return Ie(e,t,n==null?void 0:n.localStorage,r)}const Q="3.7.7",Le=Q,x=typeof Buffer=="function",Z=typeof TextDecoder=="function"?new TextDecoder:void 0,k=typeof TextEncoder=="function"?new TextEncoder:void 0,Ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",v=Array.prototype.slice.call(Ve),B=(e=>{let t={};return e.forEach((r,n)=>t[r]=n),t})(v),We=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,s=String.fromCharCode.bind(String),J=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),X=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),Y=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),ee=e=>{let t,r,n,a,i="";const f=e.length%3;for(let c=0;c<e.length;){if((r=e.charCodeAt(c++))>255||(n=e.charCodeAt(c++))>255||(a=e.charCodeAt(c++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|a,i+=v[t>>18&63]+v[t>>12&63]+v[t>>6&63]+v[t&63]}return f?i.slice(0,f-3)+"===".substring(f):i},N=typeof btoa=="function"?e=>btoa(e):x?e=>Buffer.from(e,"binary").toString("base64"):ee,R=x?e=>Buffer.from(e).toString("base64"):e=>{let r=[];for(let n=0,a=e.length;n<a;n+=4096)r.push(s.apply(null,e.subarray(n,n+4096)));return N(r.join(""))},U=(e,t=!1)=>t?X(R(e)):R(e),Ze=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?s(192|t>>>6)+s(128|t&63):s(224|t>>>12&15)+s(128|t>>>6&63)+s(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return s(240|t>>>18&7)+s(128|t>>>12&63)+s(128|t>>>6&63)+s(128|t&63)}},ke=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,te=e=>e.replace(ke,Ze),M=x?e=>Buffer.from(e,"utf8").toString("base64"):k?e=>R(k.encode(e)):e=>N(te(e)),w=(e,t=!1)=>t?X(M(e)):M(e),G=e=>w(e,!0),Je=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Me=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return s((r>>>10)+55296)+s((r&1023)+56320);case 3:return s((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return s((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},re=e=>e.replace(Je,Me),ne=e=>{if(e=e.replace(/\s+/g,""),!We.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,r="",n,a;for(let i=0;i<e.length;)t=B[e.charAt(i++)]<<18|B[e.charAt(i++)]<<12|(n=B[e.charAt(i++)])<<6|(a=B[e.charAt(i++)]),r+=n===64?s(t>>16&255):a===64?s(t>>16&255,t>>8&255):s(t>>16&255,t>>8&255,t&255);return r},P=typeof atob=="function"?e=>atob(Y(e)):x?e=>Buffer.from(e,"base64").toString("binary"):ne,oe=x?e=>J(Buffer.from(e,"base64")):e=>J(P(e).split("").map(t=>t.charCodeAt(0))),ae=e=>oe(ie(e)),Ge=x?e=>Buffer.from(e,"base64").toString("utf8"):Z?e=>Z.decode(oe(e)):e=>re(P(e)),ie=e=>Y(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),T=e=>Ge(ie(e)),He=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},se=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),ue=function(){const e=(t,r)=>Object.defineProperty(String.prototype,t,se(r));e("fromBase64",function(){return T(this)}),e("toBase64",function(t){return w(this,t)}),e("toBase64URI",function(){return w(this,!0)}),e("toBase64URL",function(){return w(this,!0)}),e("toUint8Array",function(){return ae(this)})},le=function(){const e=(t,r)=>Object.defineProperty(Uint8Array.prototype,t,se(r));e("toBase64",function(t){return U(this,t)}),e("toBase64URI",function(){return U(this,!0)}),e("toBase64URL",function(){return U(this,!0)})},$e=()=>{ue(),le()},Ke={version:Q,VERSION:Le,atob:P,atobPolyfill:ne,btoa:N,btoaPolyfill:ee,fromBase64:T,toBase64:w,encode:w,encodeURI:G,encodeURL:G,utob:te,btou:re,decode:T,isValid:He,fromUint8Array:U,toUint8Array:ae,extendString:ue,extendUint8Array:le,extendBuiltins:$e};function Ye(e){let t=e.trim().match(/^([0-9a-zA-Z\+\-]+)\.([0-9a-zA-Z\+\-]+)\.([0-9a-zA-Z\+\-]+)/);if(!t)return null;let r=JSON.parse(Ke.decode(t[2]));return(r==null?void 0:r.exp)<O()/1e3?null:r}function qe(e){return new Promise(t=>{setTimeout(t,e)})}async function et(e,t=1/0){if(!e)throw Error("Raven doesn't known where to fly");localStorage.removeItem("token");let r=new URL("/raven/",window.location.href);r.searchParams.set("gate",e),r.searchParams.set("family","blackbox");let n=window.open(r.href,"_blank","menubar=no,toolbar=no,location=yes");if(!n)throw Error("Raven doesn't known where to fly");for(t=t+O();O()<t;){await qe(1e3);let a=localStorage.getItem("token");if(a&&a.length>0)return n.close(),a;if(n.closed)throw Error("Raven was killed")}throw n.close(),Error("Raven is not home in time")}export{Ye as d,O as n,et as r,Xe as u};
