name: Github Pages

on:
  push:
    branches:
      - ocean

env:
  STREAM_RECORD_PATH: ${{ vars.STREAM_RECORD_PATH }}
  STREAM_MEDIA_BASE: ${{ vars.STREAM_MEDIA_BASE }}
  STREAM_PATH_PREFIX: ${{ vars.STREAM_PATH_PREFIX }}
  DATA_REPO: ${{ secrets.DATA_REPO }}
  DATA_REPO_BRANCH: ${{ secrets.DATA_REPO_BRANCH }}
  GATE_LOCATION: ${{ secrets.GATE_LOCATION }}
  GATE_RP_ID: ${{ secrets.GATE_RP_ID }}

jobs:
  build:
    name: space
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Set Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 20.x
      - name: Install Yarn
        run: npm install -g yarn
      - name: Install Dependencies
        run: ./scripts/install.sh
      - name: Build
        run: ./scripts/build.sh
      - name: Deploy
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          folder: ./dist
          single-commit: true
